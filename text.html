<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="img/fav.png">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>Karma Shop</title>

	<!--
		CSS
		============================================= -->
	<link rel="stylesheet" href="css/linearicons.css">
	<link rel="stylesheet" href="css/owl.carousel.css">
	<link rel="stylesheet" href="css/themify-icons.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/nice-select.css">
	<link rel="stylesheet" href="css/nouislider.min.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/main.css">
</head>

<body>

	<!-- Start Header Area -->
	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<a class="navbar-brand logo_h" href="index.html"><img src="img/logo.png" alt=""></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
					 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse offset" id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
							<li class="nav-item submenu dropdown">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Shop</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link" href="category.html">Shop Category</a></li>
									<li class="nav-item"><a class="nav-link" href="single-product.html">Product Details</a></li>
									<li class="nav-item"><a class="nav-link" href="checkout.html">Product Checkout</a></li>
									<li class="nav-item"><a class="nav-link" href="cart.html">Shopping Cart</a></li>
									<li class="nav-item"><a class="nav-link" href="confirmation.html">Confirmation</a></li>
								</ul>
							</li>
							<li class="nav-item submenu dropdown">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Blog</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
									<li class="nav-item"><a class="nav-link" href="single-blog.html">Blog Details</a></li>
								</ul>
							</li>
							<li class="nav-item submenu dropdown active">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Pages</a>
								<ul class="dropdown-menu">
									<li class="nav-item active"><a class="nav-link" href="login.html">Login</a></li>
									<li class="nav-item"><a class="nav-link" href="tracking.html">Tracking</a></li>
									<li class="nav-item"><a class="nav-link" href="elements.html">Elements</a></li>
								</ul>
							</li>
							<li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="nav-item"><a href="#" class="cart"><span class="ti-bag"></span></a></li>
							<li class="nav-item">
								<button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<div class="search_input" id="search_input_box">
			<div class="container">
				<form class="d-flex justify-content-between">
					<input type="text" class="form-control" id="search_input" placeholder="Search Here">
					<button type="submit" class="btn"></button>
					<span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
				</form>
			</div>
		</div>
	</header>
	<!-- End Header Area -->

	<!-- Start Banner Area -->
	<section class="banner-area organic-breadcrumb">
		<div class="container">
			<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Register</h1>
					<nav class="d-flex align-items-center">
						<a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
						<a href="category.html">Register</a>
					</nav>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->

	<!--================Login Box Area =================-->
	<section class="login_box_area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-6">
					<div class="login_box_img">
						<img class="img-fluid" src="img/login.jpg" alt="">
						<!-- <div class="hover">
							<h4>New to our website?</h4>
							<p>There are advances being made in science and technology everyday, and a good example of this is the</p>
							<a class="primary-btn" href="registration.html">Create an Account</a>
						</div> -->
					</div>
				</div>
				<div class="col-lg-6">
					<div class="login_form_inner">
						<h3>SIGNUP</h3>
						<form class="row login_form" action="/signup" method="post" id="contactForm" novalidate="novalidate">
							<div class="col-md-12 form-group">
								<input type="text" class="form-control" id="name" name="name" placeholder="Username" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Username'">
							</div>
							<div class="col-md-12 form-group">
								<input type="text" class="form-control" id="email" name="email" placeholder="email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'email'">
							</div>
              <div class="col-md-12 form-group">
								<input type="text" class="form-control" id="mobile" name="mobile" placeholder="mobile" onfocus="this.placeholder = ''" onblur="this.placeholder = 'mobile'">
							</div>
              <div class="col-md-12 form-group">
								<input type="text" class="form-control" id="Password" placeholder="Password" name="password" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'">
							</div>
							<div class="col-md-12 form-group">
								<!-- <div class="creat_account">
									<input type="checkbox" id="f-option2" name="selector">
									<label for="f-option2">Keep me logged in</label>
								</div> -->
							</div>
							<div class="col-md-12 form-group">
								<button type="submit" value="submit" class="primary-btn">Signup</button>
								
								
							</div>
							
						</form>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!--================End Login Box Area =================-->

	<!-- start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>About Us</h6>
						<p>
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore dolore
							magna aliqua.
						</p>
					</div>
				</div>
				<div class="col-lg-4  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Newsletter</h6>
						<p>Stay update with our latest</p>
						<div class="" id="mc_embed_signup">

							<form target="_blank" novalidate="true" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
							 method="get" class="form-inline">

								<div class="d-flex flex-row">

									<input class="form-control" name="EMAIL" placeholder="Enter Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Email '"
									 required="" type="email">


									<button class="click-btn btn btn-default"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
									<div style="position: absolute; left: -5000px;">
										<input name="b_36c4fd991d266f23781ded980_aefe40901a" tabindex="-1" value="" type="text">
									</div>

									<!-- <div class="col-lg-4 col-md-4">
													<button class="bb-btn btn"><span class="lnr lnr-arrow-right"></span></button>
												</div>  -->
								</div>
								<div class="info"></div>
							</form>
						</div>
					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget mail-chimp">
						<h6 class="mb-20">Instragram Feed</h6>
						<ul class="instafeed d-flex flex-wrap">
							<li><img src="img/i1.jpg" alt=""></li>
							<li><img src="img/i2.jpg" alt=""></li>
							<li><img src="img/i3.jpg" alt=""></li>
							<li><img src="img/i4.jpg" alt=""></li>
							<li><img src="img/i5.jpg" alt=""></li>
							<li><img src="img/i6.jpg" alt=""></li>
							<li><img src="img/i7.jpg" alt=""></li>
							<li><img src="img/i8.jpg" alt=""></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Follow Us</h6>
						<p>Let us be social</p>
						<div class="footer-social d-flex align-items-center">
							<a href="#"><i class="fa fa-facebook"></i></a>
							<a href="#"><i class="fa fa-twitter"></i></a>
							<a href="#"><i class="fa fa-dribbble"></i></a>
							<a href="#"><i class="fa fa-behance"></i></a>
						</div>
					</div>
				</div>
			</div>
			<div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
				<p class="footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->


	<script src="js/vendor/jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
	 crossorigin="anonymous"></script>
	<script src="js/vendor/bootstrap.min.js"></script>
	<script src="js/jquery.ajaxchimp.min.js"></script>
	<script src="js/jquery.nice-select.min.js"></script>
	<script src="js/jquery.sticky.js"></script>
	<script src="js/nouislider.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<!--gmaps Js-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script src="js/gmaps.min.js"></script>
	<script src="js/main.js"></script>
	
	<script src="public/javascripts/signupOtpValidation"></script>
</body>

</html>


//cart---------------------



 <!-- Start Banner Area -->
 <section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
                <h1>Shopping Cart</h1>
                <nav class="d-flex align-items-center">
                    <a href="/home">Home<span class="lnr lnr-arrow-right"></span></a>
                    <a href="/cart">Cart</a>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->

<% let totalPriceSum = 0 %>
<% if(!products.length) { %>
<div class="container-fluid mt-100">
    <div class="row px-xl-5">
      <div class="col-md-12">
        <div class="card">
            <div class="card-body cart">
              <div class="col-sm-12 empty-cart-cls text-center">
                <img src="https://i.imgur.com/dCdflKN.png" width="100" height="130" class="img-fluid mb-4 mr-3">
                <h3><strong>Your Cart is Empty!</strong></h3>
                <h4>Check for wide range of accessories collections</h4>
                <a href="/home" class="btn btn-primary cart-btn-transform m-3" data-abc="true">Continue shopping</a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
  <% } else { %>

<!--================Cart Area =================-->
<section class="cart_area">
    <div class="container">
        <div class="cart_inner">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Product</th>
                            <th scope="col">Price</th>
                            <th scope="col" style="text-align:center" >Quantity</th>
                            <th scope="col">Total</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <!-- <!-- <tbody >
                        <% products.forEach(function(item) { %>
                        <% let totalPrice = item.product.price * item.quantity; %> 
                        <% totalPriceSum += totalPrice; %>   -->
                              <!-- <tr class="incrementdecrement" data-id="<%= item.product._id %>">
                              
                                  <td class="align-middle"><img src="/uploadProductImage/<%= item.product.image[0] %>" alt="" style="width: 50px;"><%= item.product.productname %></td>
                                  <td class="align-middle price"><%= item.product.price.toFixed(2) %></td>
                                  <td class="align-middle">
                                      <div class="input-group quantity mx-auto" style="width: 100px;">
                                          <div class="input-group-btn">
                                              <button class="btn btn-sm btn-primary dec-btn" >
                                              <i class="fa fa-minus"></i>
                                              </button>
                                          </div>
                                          <span class="inputQuantity form-control  bg-secondary border-0 text-center" data-price="<%= item.product.price %>" data-total="<%= totalPrice %>"><%= item.quantity %></span>
                                          
                                          <div class="input-group-btn">
                                              <button class="btn btn-sm btn-primary inc-btn">
                                                  <i class="fa fa-plus"></i>
                                              </button>
                                          </div>
                                      </div>
                                  </td>
                                  <td class="align-middle total-price"><%= totalPrice.toFixed(2)  %></td>
                                  <td class="align-middle"><a href="/cart/<%= cart._id %>/product/<%= item.product._id %>"><button class="btn btn-sm btn-danger" onclick="return confirm('Are u sure u want to delete?')"><i class="fa fa-times"></i></button></a></td>
                              </tr> -->

                        <!-- <% }); %>  -->
                    
                      
                        <tr class="bottom_button"> -->
                            <!-- <td>
                                <a class="gray_btn" href="/updatecart">Update Cart</a>
                            </td> -->
                            <td>

                            </td>
                            <td>

                            </td>
                            <!-- <td>
                                <div class="cupon_text d-flex align-items-center">
                                    <input type="text" placeholder="Coupon Code">
                                    <a class="primary-btn" href="#">Apply</a>
                                    <a class="gray_btn" href="#">Close Coupon</a>
                                </div>
                            </td> -->
                        </tr>
                        <tr>
                            <td>

                            </td>
                            <td>

                            </td>
                            <td>
                                <h5>Subtotal</h5>
                            </td>
                        
                            <!-- <td>
                                <h5 class="total-price-sum">Rs.<%= totalPriceSum.toFixed(2) %></h5>
                            </td> -->
                        </tr>
                      
                        <tr class="out_button_area">
                            <td>

                            </td>
                            <td>

                            </td>
                            <td>

                            </td>
                            <td>
                                <div class="checkout_btn_inner d-flex align-items-center">
                                    <a class="gray_btn" href="/home">Continue Shopping</a>
                                    <a class="primary-btn" href="/checkout">Proceed to checkout</a>
                                    <!-- <button class=" primary-btn" onclick="proceedToCheckout()">Proceed To Checkout</button> -->
            
                                </div>
                            </td>
                        </tr>         
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- <% } %> -->
</section>

<!--================End Cart Area =================-->





<script>
    
    //Quantity
    const displayCount = document.querySelectorAll(".incrementdecrement");
    const totalpricesum = document.querySelector('.total-price-sum');
    const priceaftercoupon = document.querySelector('.price-after-coupon');
    
    
    displayCount.forEach(item=>{
    const decBtn = item.querySelector(".dec-btn")
    const incBtn = item.querySelector(".inc-btn")
    const inputQuantity = item.querySelector(".inputQuantity")
    const price = item.querySelector('.price')
    const totalprice = item.querySelector('.total-price')
    const productId = item.getAttribute("data-id")
    

    incBtn.addEventListener("click", () => {
      
      let qty=Number(inputQuantity.textContent)

      if (qty < 10) {
        inputQuantity.textContent=++qty
        totalprice.textContent=(price.textContent*qty).toFixed(2) 
        console.log("Product id and qty kn incBtn fucntion--", productId, qty)
        updatetotalpricesum()
        updateQuantity(productId,qty)
      }
        
    })

    decBtn.addEventListener("click", () => {
      let qty=inputQuantity.textContent 
      if (qty > 1) {inputQuantity.textContent=--qty
      totalprice.textContent=(price.textContent*qty).toFixed(2) 
      console.log("Product id and qty in decBtn fucntion--", productId, qty)
      updatetotalpricesum()
      updateQuantity(productId,qty)
     
    }
    })
    })
     
    function updatetotalpricesum(){
      let sum=0
      displayCount.forEach(item=>{
      const totalprice=item.querySelector('.total-price')
      sum+=Number(totalprice.textContent)
      })
      totalpricesum.textContent=sum.toFixed(2)  
    }
    function updateQuantity(productId,quantity){
    fetch("/updatecart", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ productId,quantity }),
    })
      .then((response) => response.json())
      .then((data) => {
             
      })
      .catch((error) => console.error(error));
  }



 </script>


orderlist tt body

<tr>
	<td>
	  <img src="/uploadProductImages/<%= product.productId.image[0] %>" class="img-thumbnail"
	  alt="Item" width="50px">
	</td>
	<td>
	  <%= product.productId.productname %>
	</td>
	<td>
	  <%= product.quantity %>
	</td>
	<td>
	  <%= product.price %>
	</td>
	<td>
	  <a href="/orderdetails/<%= item._id %>" class="btn btn-primary btn-sm">View Details</a>

	</td>
	</tr>




to correct alignment problm in orderlist its the old one
<div class="container">
   
    <!-- Your order list section code goes here -->
    <div class="row">
      <table class="table mt-4">
        <thead>
          <tr>
            <th scope="col">Image</th>
            <th scope="col">Product Name</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
      <div class="col-12">
        <h3 class="text-center mt-4"></h3>
       
        <% orders.forEach(function(item) { %>
          <div class="border border-2 p-3 mb-4">
            <a href="/orderdetails/<%= item._id %>">
              
            </a>

            <div class="order-details">
                <%= console.log('itemss',item) %>
                <tbody>
                  <% item.items.forEach(function(product) { %>
                    <%= console.log(product)%>
                    <tr>
                    <td>
                      <img src="/uploadProductImages/<%= product.product.image[0] %>" class="img-thumbnail"
                      alt="Item" width="50px">
                    </td>
                    <td>
                      <%= product.product.productname %>
                    </td>
                    <td>
                      <%= product.quantity %>
                    </td>
                    <td>
                      <%= product.price %>
                    </td>
                    <td>
                      <a href="/orderdetails/<%= item._id %>" class="btn btn-primary btn-sm">View Details</a>
                
                    </td>
                    </tr>
                    <% }); %>
                  </tbody> 
               
              </table>
            </div>
          </div>
          <% }); %>
      </div>
    </div>
  </div>



  <!-- old div of my order details page -->
  <div class="row">
	<div class="col-lg-7">
		<div class="table-responsive">
			<table class="table">
				<thead>
					<tr>
						
						<th width="40%">Product</th>
						<th width="20%">Unit Price</th>
						<th width="20%">Quantity</th>
						<th width="20%" class="text-end">Total</th>
					</tr>
				</thead>
				<% order.items.forEach(function(item) { %>
				<tbody>
					<tr>
						<td>
							<a class="itemside d-flex" href="#">
								<div class="left">
									<img src="/uploadProductImages/<%= item.product.image[0] %>" width="40" height="40" class="img-xs" alt="Item">
								</div>
								<div class="info"> <%= item.product.productname %> </div>
							</a>
						</td>
						<td> <%= item.price %> </td>
						<td> <%= item.quantity %> </td>
						<td class="text-end"> <%= item.price * item.quantity %> </td>
					</tr>
					<% }) %>  
					
					
					<tr>
						<td colspan="4">
							<article class="float-end ">
								<dl class="dlist d-flex">
									<dt>Subtotal:</dt>
									<dd>₹<%= order.totalAmount %></dd>
								</dl>
								<!-- disc amt -->
								<dl class="dlist d-flex">
									<dt>Grand total:</dt>
									<dd> <b class="h5">₹<%= order.finalPrice %></b> </dd>
								</dl>
								
							</article>
						</td>
					</tr>
				</tbody>
			</table>
		</div> <!-- table-responsive// -->
	</div> <!-- col// -->
	<div class="col-lg-1"></div>
	<div class="col-lg-4">
		<div class="box shadow-sm bg-light">
			<h6 class="mb-15">Payment info</h6>
			<p class="text-capitalize">
				<%= order.paymentMode %>
				
			</p>
		</div>
		
		<article class="icontext align-items-start">
		  <span class="icon icon-sm rounded-circle bg-primary-light">
			  <i class="text-primary material-icons md-place"></i>
		  </span>
		  <div class="text">
			  <h6 class="mb-1">Deliver to:</h6>
			  <p class="mb-1">
				  <%= order.address.city %>, <%= order.address.state %><br><%= order.address.address %> <br> <%= order.address.pincode %>
			  </p>
			 
		  </div>
	  </article>
	  <dl class="dlist d-flex">
		<dt class="text-muted">Status:</dt>
		<dd>
			<span class="badge rounded-pill alert-success text-success text-capitalize"><%= order.orderStatus %></span>
		</dd>
	  </dl>

	</div> <!-- col// -->
</div>



script for salesreport in adminpage 
<script>
    // Sample data for total sales per month
    const data = '<%- JSON.stringify(data) %>';
    
    // Extracting the dates and sales amounts from the data
    const dates = data.map(item => {
        const date = new Date(item.date);
        return date.getDate();
    });
    const amounts = data.map(item => item.amount);
    
    // Calculate the total sales
    const totalSales = amounts.reduce((acc, curr) => acc + curr, 0);
    
    console.log("Dates = ", dates);
    console.log("Amount = ", amounts);
    console.log("Total Sales = ", totalSales);
    
    Highcharts.chart('chartContainer', {
        chart: {
            type: 'line',
        },
        title: {
            text: 'Total Sales per Date',
        },
        xAxis: {
            categories: dates,
        },
        yAxis: {
            title: {
                text: 'Sales',
            },
        },
        legend: {
            enabled: false,
        },
        series: [{
            name: 'Total Sales',
            data: amounts,
        }],
    });
    
    Highcharts.chart('chartContainer2', {
        chart: {
            type: 'column',
        },
        title: {
            text: 'Total Sales per Date',
        },
        xAxis: {
            categories: dates,
        },
        yAxis: {
            title: {
                text: 'Sales',
            },
        },
        legend: {
            enabled: false,
        },
        series: [{
            name: 'Total Sales',
            data: amounts,
        }],
        plotOptions: {
            column: {
                pointWidth: 10,
            },
        },
    });
    </script>




chtgpt corrected 

<script>
	// Sample data for total sales per month
	const data =` <%- JSON.stringify(data) %>`;

	// Extracting the dates and sales amounts from the data
	const dates = data.map(item => {
		const date = new Date(item.date);
		return date.getDate();
	});
	const amounts = data.map(item => item.amount);

	// Calculate the total sales
	const totalSales = amounts.reduce((acc, curr) => acc + curr, 0);

	console.log("Dates = ", dates);
	console.log("Amount = ", amounts);
	console.log("Total Sales = ", totalSales);

	// Use the 'dates' and 'amounts' variables to render your Highcharts here
	Highcharts.chart('chartContainer', {
		chart: {
			type: 'line',
		},
		title: {
			text: 'Total Sales per Date',
		},
		xAxis: {
			categories: dates,
		},
		yAxis: {
			title: {
				text: 'Sales',
			},
		},
		legend: {
			enabled: false,
		},
		series: [{
			name: 'Total Sales',
			data: amounts,
		}],
	});

	Highcharts.chart('chartContainer2', {
		chart: {
			type: 'column',
		},
		title: {
			text: 'Total Sales per Date',
		},
		xAxis: {
			categories: dates,
		},
		yAxis: {
			title: {
				text: 'Sales',
			},
		},
		legend: {
			enabled: false,
		},
		series: [{
			name: 'Total Sales',
			data: amounts,
		}],
		plotOptions: {
			column: {
				pointWidth: 10,
			},
		},
	});
</script>



<script>

	const totalpricesum = document.querySelector('.total-price-sum');
	const priceaftercoupon = document.querySelector('.price-after-coupon');
	const order = document.querySelector('.primary-btn');
	
	// document.addEventListener('DOMContentLoaded', function() {
	 order.addEventListener('click', function() {
		
	   console.log("clicked on on 'Place Order' in checkout page")
	   const address = document.querySelector('input[name="defaultaddress"]:checked').getAttribute('data-address')
	   console.log("Address= ", address)
	   const coupon = document.querySelector('#coupon')
	   const paymentType = document.querySelector('input[name="paymentoptions"]:checked').value
		console.log("Payment type", paymentType)
		console.log("Address= ", address)
	   const details = {
		 address,
		 paymentType
		 
	   };
	  
	   if(coupon){
			orderData.coupon=coupon.getAttribute('data-coupon')
		}
	
	   console.log("Orderdata= ",details)
	
	   fetch("/checkoutpost", {
	   method: "POST",     
	   headers: {"Content-Type": "application/json"},
	   body: JSON.stringify(details),
	})
	.then(response => response.json())
		   .then(data => {
			   if (data.success) {
				   window.location = data.url
			   } else {
				   Toastify({
		   text: data.message,
		   duration: 3000,
		   gravity: "bottom", 
		   position: "center",
		   style: {
		 background: "#FFC300",
	}, 
		   }).showToast();
			   }
		   })
		   .catch(error => {
			   showToast("Something went wrong")
		   })
	
	});
	//});
	
	
	const applycoupon=document.querySelector('.applycoupon')
	applycoupon.addEventListener('click',e =>{
	e.preventDefault();
	window.location.href=`/usecoupon?total=${totalpricesum.textContent}`
	})
	
	
	</script>





// review code in product model

reviews: [
{
	user: {
		type:mongoose.Schema.ObjectId,
		ref: 'User',
		required: true,
	},
	name:{
		type: String,
		required: true,
	},
	rating:{
		type: Number,
		min: 1,
		max: 5,
		required:true,
	},
	comment:{
		type: String,
	},
},
],


<a href="/cancelorder/<%= order._id %>">
	<button class="cancel btn btn-primary">Cancel Order</button>
  </a>


  <button class="btn btn-primary"  onclick="invoiceGenerate('<%= order._id %>')" href="#">Download Invoice</button>



  <!-- section in adminAddProduct -->
  <section class=" gradient-custom">
	<div class="content-header">
	<div class="container py-5 h-100">
	  <div class="row justify-content-center align-items-center h-100">
		<div class="col-12 col-lg-9 col-xl-7">
		  <div
			class="card shadow-2-strong card-registration"
			style="border-radius: 15px"
		  >
			<div class="card-body p-4 p-md-5">
			  <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Add Products</h3>
			  <form 
			  id="productForm"
				action="/admin/addproduct"
				method="POST"
				enctype="multipart/form-data"
			  >
				<div class="row">
				  <div class="col-md-6 mb-4">
					<div class="form-outline">
					  <label class="form-label" for="productName">Product Name</label>
					  <input
						type="text"
						id="productName"
						class="form-control form-control-lg"
						name="productname"
					  />
					  <div class="error-message" id="productNameError"></div>
					</div>
				  </div>
				  <div class="col-md-6 mb-4">
					<div class="form-outline">
					  <label class="form-label" for="categoryname"
						>Product Category</label>
					  <!-- <input
						type="text"
						id="productName"
						class="form-control form-control-lg"
						name="productcategory"
					  /> -->
					  <div class="col-12">
						<select class="select form-control-lg" name="categoryname">
						  <option value="1" disabled selected>Choose Category</option>
						  <% data.forEach(function(item) { %>
						  <option value=<%= item._id %>><%= item.categoryname %></option>
						  <% }); %>
						</select>
					 </div>
  
  
					</div>
				  </div>
				</div>
  
				<div class="row">
				  <div class="col-md-6 mb-4 d-flex align-items-center"></div>
				</div>
  
				<div class="row">
				  <div class="col-md-6 mb-4 pb-2">
					<div class="form-outline">
					  <label class="form-label" for="description"
						>Product Description</label
					  >
					  <input
						type="text"
						id="description"
						class="form-control form-control-lg"
						name="description"
					  />
					  <div class="error-message" id="descriptionError"></div>
					</div>
				  </div>
				  <div class="col-md-6 mb-4 pb-2">
					<div class="form-outline">
					  <label class="form-label" for="mrp">MRP</label>
					  <input
						type="number"
						id="mrp"
						class="form-control form-control-lg"
						name="mrp"
					  />
					  <div class="error-message" id="mrpError"></div>
					</div>
				  </div>
				</div>
				<div class="row">
				  <div class="col-md-6 mb-4 pb-2">
					<div class="form-outline">
					  <label class="form-label" for="price">Offer Price</label>
					  <input
						type="number"
						id="price"
						name="price"
						class="form-control form-control-lg"
					  />
					  <div class="error-message" id="priceError"></div>
					</div>
				  </div>
  
				  <div class="col-md-6 mb-4 pb-2">
					<div class="form-outline">
					  <label class="form-label" for="addimage">Add images</label>
					  <input type="file" name="file" accept="image/*" multiple />
					</div>
				  </div>
				</div>
				<div class="row">
				  
				 <div class="col-md-6 mb-4 pb-2">
				  <div class="form-outline">
					<label class="form-label" for="price">Stock</label>
					<input
					  type="number"
					  id="stock"
					  name="stock"
					  class="form-control form-control-lg"
					/>
					<div class="error-message" id="stockError"></div>
				  </div>
				</div>
  
				</div>
  
				<div class="mt-4 pt-2">
				  <button class="btn btn-primary btn-lg" type="submit">
					ADD PRODUCT
				  </button>
				</div>
			  </form>
			</div>
		  </div>
		</div>
	  </div>
	</div>
  </div>
  </section>


  <!-- wallet code in usermodel -->
  wallet: {
    balance: {
      type: Number,
      default: 0,
    },
    transactions: [
      {
        ID: {
          type: String,
          required: true,

        },
        createdAt: {
          type: Date,
          default: Date.now,
        },
        type: {
          type: String,
          enum: ['Debit', 'Credit'],
        },

        amount: {
          type: Number,
          required: true,
        },
      },
    ],
  },

<!-- // wallet ejs file -->
  <section class="banner-area organic-breadcrumb">
	<div class="container">
	  <div
		class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end"
	  >
		<div class="col-first">
		  <h1 style="background-color: black; color: white; padding: 10px">
			Wallet
		  </h1>
		  <nav class="d-flex align-items-center"></nav>
		</div>
	  </div>
	</div>
  </section>
  <!-- End Banner Area -->

  <section
	style="
	  background: linear-gradient(45deg, rgb(56, 56, 56), rgb(79, 78, 78))
		center / cover no-repeat;
	  padding-top: 30px;
	  padding-bottom: 100px;
	"
  >
	<div style="margin: 0 auto; width: 90%; max-width: 600px">
	  <div
		style="
		  border: 1px solid #ffffff;
		  border-radius: 15px;
		  padding: 20px;
		  margin-bottom: 15px;
		"
	  >
		<h3 style="font-size: 24px; margin-bottom: 20px; color: #ffffff">
		  Time-Za Wallet
		</h3>

		<% if (user && user.wallet) { %>
		<p
		  style="
			font-size: 22px;
			margin-bottom: 20px;
			color: rgb(255, 255, 255);
		  "
		>
		  Hi, <%=user.name%>
		</p>
		<p
		  style="
			font-size: 18px;
			margin-bottom: 20px;
			color: rgb(255, 255, 255);
		  "
		>
		  Your Wallet Balance is: INR <%=
		  parseFloat(user.wallet.balance).toLocaleString(undefined, {
		  minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
		</p>
	  </div>
	  <!-- Transaction Table -->
	  <table
		style="border-collapse: collapse; width: 100%; border: 1px solid #ddd"
	  >
		<thead>
		  <tr style="background-color: #ffffff; color: rgb(13, 12, 12)">
			<th style="text-align: left; padding: 8px; font-weight: bold">
			  Order ID
			</th>
			<th style="text-align: left; padding: 8px; font-weight: bold">
			  Date and Time
			</th>
			<th style="text-align: left; padding: 8px; font-weight: bold">
			  Type
			</th>
			<th style="text-align: left; padding: 8px; font-weight: bold">
			  Amount
			</th>
		  </tr>
		</thead>
		<tbody>
		  <% userTransactions.forEach(transaction=> { %>
		  <tr style="text-align: left; padding: 8px; color: #ffffff">
			<td><%= transaction.ID %></td>
			<td>
			  <%=new Date(transaction.createdAt).toLocaleString('en-US', {
			  weekday: 'short' , month: 'short' , day: 'numeric' , year:
			  'numeric' , hour: 'numeric' , minute: 'numeric' , hour12: true
			  }) %>
			</td>
			<td>
			  <div
				class="transaction-item"
				data-transaction-type="<%= transaction.type %>"
			  >
				<%= transaction.type %>
				<!-- Transaction content here -->
			  </div>
			</td>

			<td>
			  <%= parseFloat(transaction.amount).toLocaleString(undefined, {
			  minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
			</td>
		  </tr>
		  <% }); %>
		</tbody>
	  </table>

	  <% } else { %>
	  <p style="font-size: 18px; margin-bottom: 20px; color: red">
		No wallet data available.
	  </p>
	  <% } %>
	</div>
  </section>
  <script>
	document.addEventListener("DOMContentLoaded", function () {
	  const transactionElement =
		document.getElementById("transactionElement");
	  const transactionType = "<%= transaction.type %>"; // Make sure you have the transaction type here

	  if (transactionType === "Debit") {
		transactionElement.style.color = "red";
	  } else if (transactionType === "Credit") {
		transactionElement.style.color = "green";
	  } else {
		transactionElement.style.color = "black";
	  }
	});
  </script>




<div class="login_box_img">
	<img class="img-fluid"
		src="https://mir-s3-cdn-cf.behance.net/project_modules/1400/eb2688101152473.5f455dcd65713.jpg"
		alt="scrunchie">
</div>




<section class="login_box_area section_gap" id="register-background">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="login_box_img">
            <img class="img-fluid"
              src="https://mir-s3-cdn-cf.behance.net/project_modules/1400/eb2688101152473.5f455dcd65713.jpg"
              alt="scrunchie">
          </div>
        </div>
        <div class="col-lg-6">
          <div class="login_form_inner">
            <h3>SIGNUP</h3>
            <form class="row login_form" action="/signup" method="post" id="contactForm" novalidate="novalidate">
              <div class="col-md-12 form-group">
                <input type="text" class="form-control" id="name" name="name" placeholder="Username"
                  onfocus="this.placeholder = ''" onblur="this.placeholder = 'Username'" required>
                  <p id="username_error" style="color: red;"></p>
              </div>
              <div class="col-md-12 form-group">
                <input type="text" class="form-control" id="email" name="email" placeholder="email"
                  onfocus="this.placeholder = ''" onblur="this.placeholder = 'email'" required>
                  <p id="email_error" style="color: red;"></p>
              </div>
              <div class="col-md-12 form-group">
                <input type="text" class="form-control" id="mobile" name="mobile" placeholder="mobile"
                  onfocus="this.placeholder = ''" onblur="this.placeholder = 'mobile'" required>
                  <p id="mobile_error" style="color: red;"></p>
              </div>
              <div class="col-md-12 form-group">
                <input type="text" class="form-control" id="password-field" placeholder="Password" name="password"
                  onfocus="this.placeholder = ''" onblur="this.placeholder = 'Password'" required>
                  <p id="password_error" style="color: red;"></p>
              </div>
              <div class="col-md-12 form-group">
              </div>
              <div class="col-md-12 form-group">
                <button type="submit" value="submit" class="primary-btn" onclick="return validation()">Signup</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>



  <!-- <div class="login_box_img">
							  <img class="img-fluid"
								src="/user-assets/img/loginpage1.jpg"
								alt="scrunchie">
							</div> -->



							product details page 
							<!-- <div class="product_count">
                            <label for="qty">Quantity:</label>
                            <input type="text" name="qty" id="sst" maxlength="12" value="1" title="Quantity:" class="input-text qty">
    
                            <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst )) result.value++;return false;"
                             class="increase items-count" type="button"><i class="lnr lnr-chevron-up" id="inc"></i></button>
    
                            <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst ) && sst > 0 ) result.value--;return false;"
                             class="reduced items-count" type="button"><i class="lnr lnr-chevron-down" id="dec"></i></button>
                        </div> -->
                    
                        <!-- trying another . col's -->


					line no.	217 
						<!-- <div class="card_area d-flex align-items-center"  >
                            <button class="primary-btn" id="addtocart" href="#">Add to Cart </button>
                            <a class="icon_btn" href="#"><i class="lnr lnr lnr-diamond"></i></a>
                            <a class="icon_btn" href="/wishlist"><i class="lnr lnr lnr-heart"></i></a>
                        </div> -->
    
                        
    
                         <!-- <div class="product_count" style="width: 130px; margin-right: 3rem;">
                            <label for="qty">Quantity:</label>
                            <input type="text" name="qty" id="inputQuantity" maxlength="12" value="1" title="Quantity:" class="input-text qty" style="background-color: #e8f0f2; border: 1px solid #eeeeee; border-radius: 3px; text-align: center; width: 38px; ;">
                            <button class="increase items-count btn btn-primary btn-plus" id="inc-btn" style="border-radius: 10px;">
                                <i class="fa fa-plus"></i>
                            </button>
                            <button class="reduced items-count btn btn-primary btn-minus" id="dec-btn" style="border-radius: 10px; ">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div> -->


						coupon 
						<div class="row">

							<div class="col-md-6 mb-4 pb-2">
							  <div class="form-outline">
								<label class="form-label" for="minimumAmount">Minimum Amount</label>
								<input type="number" id="minimumAmount" name="minimumAmount"
								  class="form-control form-control-lg" value="<%= coupon.minimumAmount %>" />
								<span class="error-message" id="minimumAmount-error"></span>
							  </div>
							</div>
		
							<div class="col-md-6 mb-4 pb-2">
							  <div class="form-outline">
								<label class="form-label" for="maxRedemptions">Maximum Redemptions</label>
								<input type="number" id="maxRedemptions" name="maxRedemptions"
								  class="form-control form-control-lg" value="<%= coupon.maxRedemptions %>" />
							  </div>
							</div>
		
						  </div>

						  <div class="col-md-6 mb-4 pb-2">
							<div class="form-outline">
							  <label class="form-label" for="isReferral">Is Referral?</label>
							  <div class="col-12">
								<select class="select form-control-lg" name="isReferral">
								  <option value="true">Yes</option>
								  <option value="false">No</option>
								</select>
							  </div>
							</div>
						  </div>

usercheckout <tbody> IMPORTANT</tbody>----------------------------------------------------------------------------------------------------------------------------------------------------------------------

						  <tbody>
							<form id="orderDetails">
							<tr>
							  <% let totalPriceSum = 0 %> 
							  <% let priceaftercoupon = 0 %>
							  <% cart.products.forEach(function(item) { %> 
							  <% if
							  (item.product) { %>
							  <% let totalPrice = item.product.price * item.quantity %>
							  <% totalPriceSum += totalPrice %>
							  <td id="productName">
								<%= item.product.productname %>
							  </td>
							  <td id="productPrice">
								  Rs. <%= item.product.price.toFixed(2) %> x <%=
								  item.quantity %>
							  </td>
							  <td id="totalPrice">
								<%= totalPrice.toFixed(2) %>
							  </td>
							  <% } %>
							</tr>
							<% }); %>
							<tr>
							  <td>
								<h4>Subtotal</h4>
								</td>
								<td>
								<h5></h5>
							  </td>
							  <td id="subTotalPrice">
								<%= totalPriceSum.toFixed(2) %>
							  </td>
							</tr>
							</form>
						  </tbody>
-------------------------------------------------------------------------------------------------------------------------------------------



<h5 class="text-uppercase mt-4">ADDRESS INFORMATION</h5>
<div class="mt-4 mb-4 d-flex flex-wrap justify-content-between">
  <% user.address.forEach(function(item, index) { %>
    <div class="border-2 p-3">
      <h6 class="font-weight-bold">Address:</h6>
      <p><%= item.address %></p>
      <h6 class="font-weight-bold">City:</h6>
      <p><%= item.city %></p>
      <h6 class="font-weight-bold">State:</h6>
      <p><%= item.state %></p>
      <h6 class="font-weight-bold">Pincode:</h6>
      <p><%= item.pincode %></p>
      <a href="/removeaddress?addressId=<%= item._id %>">
        <button class="btn btn-primary">Remove</button>
    </a>
    <a href="/editaddress/<%= item._id %>">
        <button style="height: 35px; width: 80px; background-color: #007bff; border: none; border-radius: 5px;" class="btn btn-primary">Edit</button>
    </a>
    
      

    </div>
    
  </a>
  <% }); %>

  
  <a href="/addaddress" class="text-decoration-none">
    <button class="genric-btn success-border mt-2">+ ADD ADDRESS</button>
  </a>
  <!-- i have given the view orders button here  -->
  <a href="/myorders" class="text-decoration-none">
    <button class="genric-btn success-border mt-2">+ VIEW ORDERS</button>
  </a>
  <!-- <a href="/changepassword" class="text-decoration-none">
    <button class="genric-btn success-border mt-2">+ CHANGE PASSWORD</button>
  </a> -->
  
</div>




<script>
      document.addEventListener('DOMContentLoaded', function () {
          const updateButton = document.getElementById('updateButton');
          const phonenumberInput = document.getElementById('phonenumberInput');
          const phonenumberError = document.getElementById('phonenumberError');
  
          updateButton.addEventListener('click', async function (event) {
              // Prevent the default form submission behavior
              event.preventDefault();
  
              // Get the phone number value
              const phoneNumber = phonenumberInput.value.trim();
  
              if (!phoneNumber) {
                  phonenumberError.textContent = 'Phone number is required';
              } else {
                  phonenumberError.textContent = ''; // Clear the error message
  
                  // Collect other form data if needed
                  const formData = {
                      name: document.getElementById('nameInput').value,
                      phonenumber: phoneNumber
                      // Add other form fields here
                  };
  
                  try {
                      const response = await fetch('/userProfile', {
                          method: 'POST',
                          body: JSON.stringify(formData),
                          headers: {
                              'Content-Type': 'application/json',
                          },
                      });
  
                      if (response.ok) {
                          // Use SweetAlert to display a success message
                          Swal.fire({
                              icon: 'success',
                              title: 'Profile Updated',
                              text: 'Your profile has been successfully updated!',
                          });
  
                          // Optionally, you can redirect to another page or perform other actions
                      } else {
                          // Handle server validation errors if needed
                          const errorResponse = await response.json();
                          // Handle the error and display a SweetAlert or update the page accordingly
                          Swal.fire({
                              icon: 'error',
                              title: 'Error',
                              text: errorResponse.error,
                          });
                      }
                  } catch (error) {
                      // Handle other network or server-related errors
                      console.error(error);
                      Swal.fire({
                          icon: 'error',
                          title: 'Error',
                          text: 'An error occurred while updating your profile. Please try again later.',
                      });
                  }
              }
          });
      });
  </script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const nameInput = document.querySelector('input[name="name"]');
    const nameError = document.getElementById('name-error');
    const phonenumberInput = document.querySelector('input[name="phonenumber"]');
    const phonenumberError = document.getElementById('phonenumber-error');
    const form = document.getElementById('userprofileform'); // Add the form element

    form.addEventListener('submit', function (event) {
      // Check input validity when the form is submitted
      if (!isValidName(nameInput.value) || !isValidPhoneNumber(phonenumberInput.value)) {
        event.preventDefault(); // Prevent form submission
        // Display error messages (if any)
        if (!isValidName(nameInput.value)) {
          nameError.textContent = 'Name must begin with a capital letter and contain only letters';
          nameError.style.display = 'block';
        }
        if (!isValidPhoneNumber(phonenumberInput.value)) {
          phonenumberError.textContent = 'Invalid mobile number';
          phonenumberError.style.display = 'block';
        }
      }
    });

    nameInput.addEventListener('input', function () {
      if (!isValidName(nameInput.value)) {
        nameError.textContent = 'Name must begin with a capital letter and contain only letters';
        nameError.style.display = 'block';
      } else {
        nameError.style.display = 'none';
      }
    });

    phonenumberInput.addEventListener('input', function () {
      if (!isValidPhoneNumber(phonenumberInput.value)) {
        phonenumberError.textContent = 'Invalid mobile number';
        phonenumberError.style.display = 'block';
      } else {
        phonenumberError.style.display = 'none';
      }
    });

    function isValidName(name) {
      const namePattern = /^[A-Z][a-zA-Z\s]*$/; // Allow spaces with \s
      return namePattern.test(name);
    }


    function isValidPhoneNumber(phonenumber) {
      const phoneNumberPattern = /^\d{10}$/;
      if (!phoneNumberPattern.test(phonenumber)) {
        return false;
      }
      for (let i = 0; i <= 9; i++) {
        if (phonenumber.indexOf(i.toString().repeat(10)) !== -1) {
          return false;
        }
      }
      return true;
    }
  });



</script>



//script for place order 

<script>
    $("#addAddressForm").submit((e) => {
      e.preventDefault();
      $.ajax({
        url: "/addaddress",
        method: "post",
        data: $("#addAddressForm").serialize(),
        success: (response) => {
          if (response.status) {
            window.location.reload();
          } else {
            alert("Address ~ added");
          }
        },
      });
    });

    function handlePlaceOrder(){
                        let contactDetails = $('#addressForm').serialize();
                        contactDetails = contactDetails.split("=")[1];
                        let paymentMethod = $('#paymentOption').serialize();
                        paymentMethod = paymentMethod.split("=")[1];
                        var subTotalPriceElement = $('#subTotalPrice');
                        var subTotalPrice = subTotalPriceElement.text();
                        subTotalPrice = +subTotalPrice;
                        const details = {
                          address:contactDetails,
                          paymentMethod:paymentMethod,
                          subTotalPrice,
                        }
                        $.ajax({
        url: "/checkoutpost",
        method: "post",
        data: details,
        success: (response) => {
          razorpayPayment(response)
        console.log('response',response)
        },
      });

    }


    function razorpayPayment(order) {
    console.log('order in payment ejs',order)
        var options = {
          "key": order.key_id, //  key_id from the response
        "amount": order.amount, //  Default currency is INR. Hence, 50000 refers to 50000 paise
            "currency": "INR",
            "name": "E-Scrunch",
            "description": "Test Transaction",
            "image": "https://example.com/your_logo",
            "order_id": order.order_id, //This is a sample Order ID. Pass the id obtained in the response of Step 1
            "handler": function (response) {
              alert('payment succeeded')
              
              console.log(response)
            },
            "prefill": {
                "name": order.name,
                "email": "gaurav.kumar@example.com",
                "contact": "9999999999"
            },
            "notes": {
                "address": "Razorpay Corporate Office"
            },
            "theme": {
                "color": "#3399cc"
            }
        };
        var rzp1 = new Razorpay(options);
        rzp1.open();
    }

    

  </script>